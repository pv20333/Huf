{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tiago\\\\OneDrive\\\\Documentos\\\\GitHub\\\\Huf\\\\Frontend\\\\src\\\\view\\\\pages\\\\criarFomularios\\\\escolher-tabela.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Select, Table, Button, Input } from \"antd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nfunction EscolherTabela() {\n  _s();\n  const [tabelas, setTabelas] = useState([]);\n  const [selectedTables, setSelectedTables] = useState([]);\n  const [nomeFormulario, setNomeFormulario] = useState(\"\");\n  useEffect(() => {\n    axios.get(\"http://localhost:8080/api/escolhertabela/tabelas-geral\").then(res => {\n      setTabelas(res.data);\n    }).catch(error => {\n      console.error(\"Erro ao obter tabelas\", error);\n    });\n  }, []);\n  const handleTabelaChange = (index, id) => {\n    console.log('handleTabelaChange', {\n      index,\n      id\n    });\n    axios.get(`http://localhost:8080/api/escolhertabela/colunas/${id}`).then(res => {\n      const newTables = [...selectedTables];\n      newTables[index] = {\n        ...res.data,\n        id,\n        colunas: res.data.colunas.map(coluna => ({\n          title: coluna.TituloColunas,\n          dataIndex: coluna.TituloColunas\n        }))\n      };\n      setSelectedTables(newTables);\n    }).catch(error => {\n      console.error(\"Erro ao obter colunas\", error);\n    });\n  };\n  const handleAddTable = () => {\n    setSelectedTables([...selectedTables, {}]);\n  };\n  const handleNomeFormularioChange = event => {\n    setNomeFormulario(event.target.value);\n  };\n  const handleGuardar = () => {\n    console.log('handleGuardar', {\n      nomeFormulario,\n      tabelas: selectedTables.map(table => table.n_TabelaGeral)\n    });\n    axios.post(`http://localhost:8080/api/escolhertabela/guardar`, {\n      nomeFormulario,\n      tabelas: selectedTables.map(table => table.id)\n    }).then(res => {\n      console.log(res);\n    }).catch(error => {\n      console.error(\"Erro ao guardar\", error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Input, {\n      placeholder: \"Form name\",\n      value: nomeFormulario,\n      onChange: handleNomeFormularioChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), selectedTables.map((table, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        style: {\n          width: 200\n        },\n        onChange: value => handleTabelaChange(index, value),\n        children: tabelas.map(tabela => /*#__PURE__*/_jsxDEV(Option, {\n          value: tabela.n_TabelaGeral,\n          children: tabela.designacao\n        }, tabela.n_TabelaGeral, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        columns: table.colunas,\n        dataSource: Array.from({\n          length: table.numero_linhas\n        }, (_, i) => ({\n          key: i\n        })),\n        pagination: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleAddTable,\n      children: \"Add Table\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleGuardar,\n      children: \"Save\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(EscolherTabela, \"Pa09BU/p1zYw5h7ubRDeIEHr7gg=\");\n_c = EscolherTabela;\nexport default EscolherTabela;\nvar _c;\n$RefreshReg$(_c, \"EscolherTabela\");","map":{"version":3,"names":["React","useState","useEffect","axios","Select","Table","Button","Input","jsxDEV","_jsxDEV","Option","EscolherTabela","_s","tabelas","setTabelas","selectedTables","setSelectedTables","nomeFormulario","setNomeFormulario","get","then","res","data","catch","error","console","handleTabelaChange","index","id","log","newTables","colunas","map","coluna","title","TituloColunas","dataIndex","handleAddTable","handleNomeFormularioChange","event","target","value","handleGuardar","table","n_TabelaGeral","post","children","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","style","width","tabela","designacao","columns","dataSource","Array","from","length","numero_linhas","_","i","key","pagination","onClick","_c","$RefreshReg$"],"sources":["C:/Users/tiago/OneDrive/Documentos/GitHub/Huf/Frontend/src/view/pages/criarFomularios/escolher-tabela.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Select, Table, Button, Input } from \"antd\";\r\n\r\nconst { Option } = Select;\r\n\r\nfunction EscolherTabela() {\r\n  const [tabelas, setTabelas] = useState([]);\r\n  const [selectedTables, setSelectedTables] = useState([]);\r\n  const [nomeFormulario, setNomeFormulario] = useState(\"\");\r\n  \r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"http://localhost:8080/api/escolhertabela/tabelas-geral\")\r\n      .then((res) => {\r\n        setTabelas(res.data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Erro ao obter tabelas\", error);\r\n      });\r\n\r\n      \r\n  }, []);\r\n\r\n  const handleTabelaChange = (index, id) => {\r\n    console.log('handleTabelaChange', { index, id });\r\n    axios\r\n      .get(`http://localhost:8080/api/escolhertabela/colunas/${id}`)\r\n      .then((res) => {\r\n        const newTables = [...selectedTables];\r\n        newTables[index] = {\r\n          ...res.data,\r\n          id,\r\n          colunas: res.data.colunas.map((coluna) => ({\r\n            title: coluna.TituloColunas,\r\n            dataIndex: coluna.TituloColunas,\r\n          })),\r\n        };\r\n        setSelectedTables(newTables);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Erro ao obter colunas\", error);\r\n      });\r\n  };\r\n\r\n  const handleAddTable = () => {\r\n    setSelectedTables([...selectedTables, {}]);\r\n  };\r\n\r\n  const handleNomeFormularioChange = (event) => {\r\n    setNomeFormulario(event.target.value);\r\n  };\r\n\r\n  const handleGuardar = () => {\r\n    console.log('handleGuardar', { nomeFormulario, tabelas: selectedTables.map((table) => table.n_TabelaGeral) });\r\n    axios\r\n      .post(`http://localhost:8080/api/escolhertabela/guardar`, {\r\n        nomeFormulario,\r\n        tabelas: selectedTables.map((table) => table.id),\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Erro ao guardar\", error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Input\r\n        placeholder=\"Form name\"\r\n        value={nomeFormulario}\r\n        onChange={handleNomeFormularioChange}\r\n      />\r\n      <br />\r\n      {selectedTables.map((table, index) => (\r\n        <div key={index}>\r\n          <br />\r\n          <Select\r\n            style={{ width: 200 }}\r\n            onChange={(value) => handleTabelaChange(index, value)}\r\n          >\r\n            {tabelas.map((tabela) => (\r\n              <Option key={tabela.n_TabelaGeral} value={tabela.n_TabelaGeral}>\r\n                {tabela.designacao}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n          \r\n          <Table\r\n            columns={table.colunas}\r\n            dataSource={Array.from({ length: table.numero_linhas }, (_, i) => ({\r\n              key: i,\r\n            }))}\r\n            pagination={false}\r\n          />\r\n        </div>\r\n      ))}\r\n      <br />\r\n      <Button onClick={handleAddTable}>Add Table</Button>\r\n      <Button onClick={handleGuardar}>Save</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EscolherTabela;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}